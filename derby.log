----------------------------------------------------------------
Wed Apr 22 00:58:33 MSK 2015:
Booting Derby version The Apache Software Foundation - Apache Derby - 10.11.1.1 - (1616546): instance a816c00e-014c-ddfd-5f0a-0000022563b0 
on database directory C:\Users\vio\IdeaProjects\Bookstore\test_bookstore with class loader sun.misc.Launcher$AppClassLoader@2a139a55 
Loaded from file:/C:/Users/vio/.m2/repository/org/apache/derby/derby/10.11.1.1/derby-10.11.1.1.jar
java.vendor=Oracle Corporation
java.runtime.version=1.8.0_40-b26
user.dir=C:\Users\vio\IdeaProjects\Bookstore
os.name=Windows 7
os.arch=amd64
os.version=6.1
derby.system.home=null
Database Class Loader started - derby.database.classpath=''
Wed Apr 22 00:58:42 MSK 2015 Thread[taskScheduler-1,5,main] (XID = 4918), (SESSIONID = 75), (DATABASE = test_bookstore), (DRDAID = null), Cleanup action starting
Wed Apr 22 00:58:42 MSK 2015 Thread[taskScheduler-1,5,main] (XID = 4918), (SESSIONID = 75), (DATABASE = test_bookstore), (DRDAID = null), Failed Statement is: SELECT * FROM BOOKSTORE_VIEW
ERROR 08000: Connection closed by unknown interrupt.
	at org.apache.derby.iapi.error.StandardException.newException(Unknown Source)
	at org.apache.derby.iapi.error.StandardException.newException(Unknown Source)
	at org.apache.derby.iapi.util.InterruptStatus.setInterrupted(Unknown Source)
	at org.apache.derby.iapi.util.InterruptStatus.throwIf(Unknown Source)
	at org.apache.derby.impl.sql.execute.BasicNoPutResultSetImpl.checkCancellationFlag(Unknown Source)
	at org.apache.derby.impl.sql.execute.TableScanResultSet.getNextRowCore(Unknown Source)
	at org.apache.derby.impl.sql.execute.JoinResultSet.openCore(Unknown Source)
	at org.apache.derby.impl.sql.execute.JoinResultSet.openCore(Unknown Source)
	at org.apache.derby.impl.sql.execute.ProjectRestrictResultSet.openCore(Unknown Source)
	at org.apache.derby.impl.sql.execute.BasicNoPutResultSetImpl.open(Unknown Source)
	at org.apache.derby.impl.sql.GenericPreparedStatement.executeStmt(Unknown Source)
	at org.apache.derby.impl.sql.GenericPreparedStatement.execute(Unknown Source)
	at org.apache.derby.impl.jdbc.EmbedStatement.executeStatement(Unknown Source)
	at org.apache.derby.impl.jdbc.EmbedStatement.execute(Unknown Source)
	at org.apache.derby.impl.jdbc.EmbedStatement.executeQuery(Unknown Source)
	at org.springframework.jdbc.core.JdbcTemplate$1QueryStatementCallback.doInStatement(JdbcTemplate.java:455)
	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:405)
	at org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:471)
	at org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:481)
	at db.bookstore.dao.impl.BookstoreDaoImpl.getBooks(BookstoreDaoImpl.java:150)
	at db.bookstore.dao.impl.BookstoreDaoImpl.getAllBooks(BookstoreDaoImpl.java:108)
	at db.bookstore.services.impl.SerializationServiceImpl.dump(SerializationServiceImpl.java:32)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:65)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
---------------
Stack traces for all live threads:
Thread name=Attach Listener id=5 priority=5 state=RUNNABLE isdaemon=true

Thread name=author%0043ache.data id=49 priority=5 state=TIMED_WAITING isdaemon=false
	sun.misc.Unsafe.park(Native Method)
	java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)
	java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2078)
	java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1093)
	java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)
	java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1067)
	java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1127)
	java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	java.lang.Thread.run(Thread.java:745)

Thread name=Statistics Thread-__DEFAULT__-1 id=50 priority=5 state=TIMED_WAITING isdaemon=true
	sun.misc.Unsafe.park(Native Method)
	java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)
	java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2078)
	java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1093)
	java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)
	java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1067)
	java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1127)
	java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	java.lang.Thread.run(Thread.java:745)

Thread name=Timer-0 id=11 priority=5 state=WAITING isdaemon=true
	java.lang.Object.wait(Native Method)
	java.lang.Object.wait(Object.java:502)
	java.util.TimerThread.mainLoop(Timer.java:526)
	java.util.TimerThread.run(Timer.java:505)

Thread name=Monitor Ctrl-Break id=9 priority=5 state=RUNNABLE isdaemon=true
	java.net.DualStackPlainSocketImpl.accept0(Native Method)
	java.net.DualStackPlainSocketImpl.socketAccept(DualStackPlainSocketImpl.java:131)
	java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:404)
	java.net.PlainSocketImpl.accept(PlainSocketImpl.java:199)
	java.net.ServerSocket.implAccept(ServerSocket.java:545)
	java.net.ServerSocket.accept(ServerSocket.java:513)
	com.intellij.rt.execution.application.AppMain$1.run(AppMain.java:90)
	java.lang.Thread.run(Thread.java:745)

Thread name=Signal Dispatcher id=4 priority=9 state=RUNNABLE isdaemon=true

Thread name=taskScheduler-1 id=53 priority=5 state=RUNNABLE isdaemon=false
	java.lang.Thread.dumpThreads(Native Method)
	java.lang.Thread.getAllStackTraces(Thread.java:1603)
	org.apache.derby.iapi.error.ThreadDump.getStackDumpString(Unknown Source)
	sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	java.lang.reflect.Method.invoke(Method.java:497)
	org.apache.derby.iapi.error.ExceptionUtil$1.run(Unknown Source)
	java.security.AccessController.doPrivileged(Native Method)
	org.apache.derby.iapi.error.ExceptionUtil.dumpThreads(Unknown Source)
	org.apache.derby.iapi.services.context.ContextManager.cleanupOnError(Unknown Source)
	org.apache.derby.impl.jdbc.TransactionResourceImpl.cleanupOnError(Unknown Source)
	org.apache.derby.impl.jdbc.TransactionResourceImpl.handleException(Unknown Source)
	org.apache.derby.impl.jdbc.EmbedConnection.handleException(Unknown Source)
	org.apache.derby.impl.jdbc.ConnectionChild.handleException(Unknown Source)
	org.apache.derby.impl.jdbc.EmbedStatement.executeStatement(Unknown Source)
	org.apache.derby.impl.jdbc.EmbedStatement.execute(Unknown Source)
	org.apache.derby.impl.jdbc.EmbedStatement.executeQuery(Unknown Source)
	org.springframework.jdbc.core.JdbcTemplate$1QueryStatementCallback.doInStatement(JdbcTemplate.java:455)
	org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:405)
	org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:471)
	org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:481)
	db.bookstore.dao.impl.BookstoreDaoImpl.getBooks(BookstoreDaoImpl.java:150)
	db.bookstore.dao.impl.BookstoreDaoImpl.getAllBooks(BookstoreDaoImpl.java:108)
	db.bookstore.services.impl.SerializationServiceImpl.dump(SerializationServiceImpl.java:32)
	sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	java.lang.reflect.Method.invoke(Method.java:497)
	org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:65)
	org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308)
	java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180)
	java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294)
	java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	java.lang.Thread.run(Thread.java:745)

Thread name=__DEFAULT__ id=48 priority=5 state=TIMED_WAITING isdaemon=true
	java.lang.Object.wait(Native Method)
	java.util.TimerThread.mainLoop(Timer.java:552)
	java.util.TimerThread.run(Timer.java:505)

Thread name=Reference Handler id=2 priority=10 state=WAITING isdaemon=true
	java.lang.Object.wait(Native Method)
	java.lang.Object.wait(Object.java:502)
	java.lang.ref.Reference$ReferenceHandler.run(Reference.java:157)

Thread name=book%0043ache.data id=51 priority=5 state=TIMED_WAITING isdaemon=false
	sun.misc.Unsafe.park(Native Method)
	java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)
	java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2078)
	java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1093)
	java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)
	java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1067)
	java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1127)
	java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	java.lang.Thread.run(Thread.java:745)

Thread name=Finalizer id=3 priority=8 state=WAITING isdaemon=true
	java.lang.Object.wait(Native Method)
	java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:143)
	java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:164)
	java.lang.ref.Finalizer$FinalizerThread.run(Finalizer.java:209)

Thread name=main id=1 priority=5 state=BLOCKED isdaemon=false
	java.lang.Object.wait(Native Method)
	java.lang.Thread.join(Thread.java:1253)
	net.sf.ehcache.CacheManager.shutdown(CacheManager.java:1526)
	org.springframework.cache.ehcache.EhCacheManagerFactoryBean.destroy(EhCacheManagerFactoryBean.java:182)
	org.springframework.beans.factory.support.DisposableBeanAdapter.destroy(DisposableBeanAdapter.java:258)
	org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroyBean(DefaultSingletonBeanRegistry.java:578)
	org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroySingleton(DefaultSingletonBeanRegistry.java:554)
	org.springframework.beans.factory.support.DefaultListableBeanFactory.destroySingleton(DefaultListableBeanFactory.java:900)
	org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroySingletons(DefaultSingletonBeanRegistry.java:523)
	org.springframework.beans.factory.support.DefaultListableBeanFactory.destroySingletons(DefaultListableBeanFactory.java:907)
	org.springframework.context.support.AbstractApplicationContext.destroyBeans(AbstractApplicationContext.java:908)
	org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:884)
	org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:836)
	org.springframework.test.context.ContextCache.remove(ContextCache.java:221)
	org.springframework.test.context.ContextCache.remove(ContextCache.java:186)
	org.springframework.test.context.DefaultCacheAwareContextLoaderDelegate.closeContext(DefaultCacheAwareContextLoaderDelegate.java:115)
	org.springframework.test.context.DefaultTestContext.markApplicationContextDirty(DefaultTestContext.java:76)
	org.springframework.test.context.support.DirtiesContextTestExecutionListener.dirtyContext(DirtiesContextTestExecutionListener.java:140)
	org.springframework.test.context.support.DirtiesContextTestExecutionListener.afterTestMethod(DirtiesContextTestExecutionListener.java:94)
	org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:297)
	org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:90)
	org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:73)
	org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:224)
	org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:83)
	org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:68)
	org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:163)
	org.junit.runners.Suite.runChild(Suite.java:128)
	org.junit.runners.Suite.runChild(Suite.java:27)
	org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	org.junit.runner.JUnitCore.run(JUnitCore.java:137)
	com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:78)
	com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:212)
	com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:68)
	sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	java.lang.reflect.Method.invoke(Method.java:497)
	com.intellij.rt.execution.application.AppMain.main(AppMain.java:140)

Thread name=derby.rawStoreDaemon id=19 priority=5 state=TIMED_WAITING isdaemon=true
	java.lang.Object.wait(Native Method)
	org.apache.derby.impl.services.daemon.BasicDaemon.rest(Unknown Source)
	org.apache.derby.impl.services.daemon.BasicDaemon.run(Unknown Source)
	java.lang.Thread.run(Thread.java:745)


---------------

Cleanup action completed
